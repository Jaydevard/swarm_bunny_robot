#:kivy 2.0

<StatusBarWidget>:
    canvas:
        Rectangle:
            size: self.size
            pos: self.pos
            source: self._background_image

    spacing: 1
    rows: 1
    cols: 4
    _battery_image: _battery_image
    _battery_label: _battery_label
    _wifi_image: _wifi_image
    _state_image: _state_image
    _speed_image: _speed_image
    _speed_label: _speed_label
    size_hint: 1, 1
    # (r:1, c:1)
    BoxLayout:
        size_hint: 1, 1
        pos_hint: {"center_x": 0.5, "center_y":0.5}
        Image:
            id: _state_image
            name: "state_image"
            size_hint: 1, 1
            pos_hint: {"center_x": 0.5, "center_y":0.5}
            orientation: "horizontal"


# (r:1, c:2)
    BoxLayout:
        size_hint: 1, 1
        pos_hint: {"center_x": 0.5, "center_y":0.5}
        orientation: "vertical"
        StatusBarWidgetImage:
            id: _speed_image
            name: "speed_image"
            size_hint: 1, 1
            pos_hint: {"center_x": 0.5, "center_y":0.5}

        Label:
            id: _speed_label
            name: "speed_label"
            size_hint: 1,1
            pos_hint: {"center_x": 0.5, "center_y":0.5}
            text:"[b]15[/b] \r[i]cm/s[/i]"
            markup: True


    # (r:1, c:3)
    FloatLayout:
        size_hint: 1, 1
        pos_hint: {"center_x": 0.5, "center_y":0.5}
        StatusBarWidgetImage:
            id: _battery_image
            name: "battery_image"
            pos_hint: {"center_x": 0.5, "center_y":0.5}
            on_release: self.parent.parent.on_image_press(self.name)
        Label:
            id: _battery_label
            name: "battery_label"
            size_hint: 1,0.2
            pos_hint: {"center_x": 0.5, "center_y":0.5}
            text:"[b]  15%[/b]"
            markup: True

    # (r:1, c:4)
    BoxLayout:
        size_hint: 1, 1
        pos_hint: {"center_x": 0.5, "center_y":0.5}
        StatusBarWidgetImage:
            id: _wifi_image
            name: "wifi_image"
            pos: self.pos
            size: self.size
            on_release: self.parent.parent.on_image_press(self.name)


<BunnyWidget>:
    pos: self.pos
    size: self.size
    canvas.before:
        PushMatrix
        Rotate:
            angle: self._angle
            axis: 0, 0, 1
            origin: self.center
    canvas.after:
        PopMatrix

<RadioDongleWidget>:
    _wifi_image: _wifi_image
    _spinner: _spinner
    _search_button: _search_button
    _connect_button: _connect_button

    size_hint: 1, 1
    orientation: "horizontal"
    # Wifi Image
    Image:
        id: _wifi_image
        size_hint: 0.3, 1
        pos_hint: {"center_x": 0.5, "center_y":0.5}
    # Radio Options Spinner
    Spinner:
        id: _spinner
        size_hint: 1, 1
        markup: True
        size_hint: 1, 1
        font_size: '16sp'
        pos_hint: {"left": 1}

    GridLayout:
        rows: 2
        cols: 1
        size_hint: (1, 1)
        Button:
            id: _search_button
            size_hint: 1, 1
            text: "[b][i]Search[/i][/b]"
            markup: True
            font_size: '17sp'
        Button:
            id: _connect_button
            size_hint: 1, 1
            text: "[b][i]Connect[i][/b]"
            font_size: '17sp'
            markup: True

<TransmitterWidget>:
    drag_rectangle: self.x, self.y, self.width, self.height
    drag_timeout: 1000000
    drag_distance: 0



<BunnyActionBar>:

    ActionView:
        ActionPrevious:
            title: "Connection Status"
            with_previous: False

        ActionButton:
            text: "Connected"
        
        ActionButton:
            text: "State"
        

<DragAndResizeRect>:
    # drag definitions
    drag_rectangle: self.x, self.y, self.width, self.height
    drag_timeout: 10000000
    drag_distance: 0

    
    canvas.after:
        Color:
            rgba: self._fill_color
        Rectangle:
            size: self.size
            pos: self.pos  
        
        Color:
            rgba: self._border_color
        Line:
            cap: "square"
            joint: 'miter'
            width: self._border_width
            rectangle: self._border_coord
                      


<GridWidget>:
    canvas.before:
        Color:
            rgba: 0, 0, 1,0
        Rectangle:
            pos: self.pos
            size: self.size

    














