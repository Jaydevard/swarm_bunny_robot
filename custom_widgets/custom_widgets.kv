#:kivy 2.0

<StatusBarWidget>:
    canvas:
        Rectangle:
            size: self.size
            pos: self.pos
            source: self._background_image

    spacing: 1
    rows: 1
    cols: 4
    _battery_image: _battery_image
    _battery_label: _battery_label
    _wifi_image: _wifi_image
    _state_image: _state_image
    _speed_image: _speed_image
    _speed_label: _speed_label
    size_hint: 1, 1
    # (r:1, c:1)
    BoxLayout:
        size_hint: 1, 1
        pos_hint: {"center_x": 0.5, "center_y":0.5}
        Image:
            id: _state_image
            name: "state_image"
            size_hint: 1, 1
            pos_hint: {"center_x": 0.5, "center_y":0.5}
            orientation: "horizontal"


# (r:1, c:2)
    BoxLayout:
        size_hint: 1, 1
        pos_hint: {"center_x": 0.5, "center_y":0.5}
        orientation: "vertical"
        StatusBarWidgetImage:
            id: _speed_image
            name: "speed_image"
            size_hint: 1, 1
            pos_hint: {"center_x": 0.5, "center_y":0.5}

        Label:
            id: _speed_label
            name: "speed_label"
            size_hint: 1,1
            pos_hint: {"center_x": 0.5, "center_y":0.5}
            text:"[b]15[/b] \r[i]cm/s[/i]"
            markup: True


    # (r:1, c:3)
    FloatLayout:
        size_hint: 1, 1
        pos_hint: {"center_x": 0.5, "center_y":0.5}
        StatusBarWidgetImage:
            id: _battery_image
            name: "battery_image"
            pos_hint: {"center_x": 0.5, "center_y":0.5}
            on_release: self.parent.parent.on_image_press(self.name)
        Label:
            id: _battery_label
            name: "battery_label"
            size_hint: 1,0.2
            pos_hint: {"center_x": 0.5, "center_y":0.5}
            text:"[b]  15%[/b]"
            markup: True

    # (r:1, c:4)
    BoxLayout:
        size_hint: 1, 1
        pos_hint: {"center_x": 0.5, "center_y":0.5}
        StatusBarWidgetImage:
            id: _wifi_image
            name: "wifi_image"
            pos: self.pos
            size: self.size
            on_release: self.parent.parent.on_image_press(self.name)


<BunnyWidget>:
    pos: self.pos
    size: self.size
    canvas.before:
        PushMatrix
        Rotate:
            angle: self._angle
            axis: 0, 0, 1
            origin: self.center
    canvas.after:
        PopMatrix

<RadioDongleWidget>:
    _wifi_image: _wifi_image
    _spinner: _spinner
    _search_button: _search_button
    _connect_button: _connect_button

    size_hint: 1, 1
    orientation: "horizontal"
    # Wifi Image
    Image:
        id: _wifi_image
        size_hint: 0.3, 1
        pos_hint: {"center_x": 0.5, "center_y":0.5}
    # Radio Options Spinner
    Spinner:
        id: _spinner
        size_hint: 1, 1
        markup: True
        size_hint: 1, 1
        font_size: '16sp'
        pos_hint: {"left": 1}

    GridLayout:
        rows: 2
        cols: 1
        size_hint: (1, 1)
        Button:
            id: _search_button
            size_hint: 1, 1
            text: "[b][i]Search[/i][/b]"
            markup: True
            font_size: '17sp'
        Button:
            id: _connect_button
            size_hint: 1, 1
            text: "[b][i]Connect[i][/b]"
            font_size: '17sp'
            markup: True

<BunnyActionBar>:

    ActionView:
        ActionPrevious:
            title: "Connection Status"
            with_previous: False

        ActionButton:
            text: "Connected"
        
        ActionButton:
            text: "State"
        
<DragAndResizeTriangle>:
    # Triangle Definitions
    drag_rectangle: self.x, self.y, self.width, self.height
    drag_timeout: 1000000
    drag_distance: 0
    canvas.after:
        Color:
            rgba: 1, 1, 1, 1
        Rectangle:
            pos: self.pos
            size: self.size
        Color:
            rgba: self.fill_color
        Triangle:
            points: self._triangle_points

        Color:
            rgba: self.border_color

        Line:
            cap: "square"
            joint: "miter"
            width: self._border_width
            points: self._border_points


<DragAndResizeRect>:
    # drag definitions
    drag_rectangle: self.x, self.y, self.width, self.height
    drag_timeout: 10000000
    drag_distance: 0
    canvas.after:
        Color:
            rgba: self.fill_color
        Rectangle:
            size: self.size
            pos: self.pos
        
        Color:
            rgba: self.border_color
        Line:
            cap: "square"
            joint: 'miter'
            width: self._border_width
            rectangle: self._border_coord
                      

<DragAndResizePolygon>:
    # drag definitions
    drag_rectangle: self.x, self.y, self.width, self.height
    drag_timeout: 10000000
    drag_distance: 0

    canvas.after:
        Color: 
            rgba: self.fill_color
        Ellipse:
            pos: self.pos
            size: self.size
            segments: self.segments
        Color:
            rgba: self.border_color
        Line:
            points: self.line_points
            width: self.border_width


<GridWidget>:


<ColorDropDown>:
    red_slider: _red_slider
    green_slider: _green_slider
    blue_slider: _blue_slider
    transparency_slider: _transparency_slider
    none_button: _none_button


    Slider:
        id: _red_slider
        min: 0
        max: 1
        step: 0.1
        orientation: "horizontal"
        size_hint_y: None
        height: '20dp'
        cursor_height: '12sp'
        cursor_width: '12sp'
        
        canvas.before:
            Color: 
                rgba: 1, 0, 0, 1
            Rectangle:
                pos: self.pos
                size: self.size

    Slider:
        id: _green_slider
        min: 0
        max: 1
        step: 0.1
        orientation: "horizontal"
        size_hint_y: None
        height: '20dp'
        cursor_width: '12sp'
        cursor_height: '12sp'
        canvas.before:
            Color: 
                rgba: 0, 1, 0, 1
            Rectangle:
                pos: self.pos
                size: self.size

    Slider:
        id: _blue_slider
        min: 0
        max: 1
        step: 0.1
        orientation: "horizontal"
        size_hint_y: None
        height: '20dp'
        cursor_width: '12sp'
        cursor_height: '12sp'
        canvas.before:
            Color: 
                rgba: 0, 0, 1, 1
            Rectangle:
                pos: self.pos
                size: self.size

    Slider:
        id: _transparency_slider
        min: 0
        max: 1
        step: 0.1
        orientation: "horizontal"
        size_hint_y: None
        height: '20dp'
        cursor_width: '12sp'
        cursor_height: '12sp'
        canvas.before:
            Color: 
                rgba: 1, 1, 1, 0.2
            Rectangle:
                pos: self.pos
                size: self.size
    Button:
        id: _none_button
        size_hint_y: None
        height: '25dp'
        text: "[i]None[/i]"
        font_size: 12
        markup: True


<ShapeSettings>:
    
    _shape_label: _shape_label
    _shape_spinner: _shape_spinner
    
    _fill_color_label: _fill_color_label
    _fill_color_button: _fill_color_button 

    _type_label: _type_label
    _type_spinner: _type_spinner

    _border_color_label: _border_color_label
    _border_color_button: _border_color_button


    _lock_size_label: _lock_size_label
    _lock_size_checkbox: _lock_size_checkbox

    _lock_position_label: _lock_position_label
    _lock_position_checkbox: _lock_position_checkbox
    
    _place_button: _place_button
    _remove_button: _remove_button
    _new_button: _new_button

    cols: 6
    row_force_default: True
    row_default_height: 30
    spacing: 2

    
    #(r1, c1)
    Label:
        id: _shape_label
        text: "Shape"
        markup: True
        font_size: self.parent._label_font_size
        canvas.before:
            Color:
                rgba: self.parent._bkg_color
            Rectangle:
                pos: self.pos
                size: self.size

    #(r1, c2)
    Spinner:
        id: _shape_spinner
        text: "Rectangle"
        values: ["Rectangle","Triangle", "Polygon","Ellipse", "Custom"]
        sync_height: True
    
    #(r1, c3)
    Label:
        id: _fill_color_label
        text: "Fill"
        markup: True
        font_size: self.parent._label_font_size
        canvas.before:
            Color:
                rgba: self.parent._bkg_color
            Rectangle:
                pos: self.pos
                size: self.size

    #(r1, c4)
    Button:
        id: _fill_color_button
        markup: True
        font_size: 12
        background_color: 0, 0, 0, 1
        canvas:
            Color:
                rgba: self.parent._shape_fill_color
            Rectangle:
                pos: self.pos
                size: self.size

    #(r1, c5)
    Label:
        id: _type_label
        text: "Type"
        font_size: self.parent._label_font_size
        canvas.before:
            Color: 
                rgba: self.parent._bkg_color
            Rectangle:
                pos: self.pos
                size: self.size
    
    #(r1, c6)
    Spinner: 
        id: _type_spinner
        text: "Border"
        values: ["Border", "Obstacle"]
        canvas.before:
            Color:
                rgba: self.parent._bkg_color
            Rectangle:
                pos: self.pos
                size: self.size
        sync_height: True


    #(r2, c1)
    Label:
        id: _border_color_label
        text: "Border "
        font_size: self.parent._label_font_size
        pos: self.pos
        size: self.size
        canvas.before:
            Color:
                rgba: self.parent._bkg_color
            Rectangle:
                pos: self.pos
                size: self.size

    #(r2, c2)
    Button: 
        id: _border_color_button
        markup: True
        font_size: 12
        background_color: 0, 0, 0, 1
        canvas:
            Color:
                rgba: self.parent._shape_border_color
            Rectangle:
                pos: self.pos
                size: self.size
        
    #(r2, c3)
    Label:
        id: _lock_size_label
        text: "Lock Size"
        font_size: self.parent._label_font_size
        canvas.before:
            Color:
                rgba: self.parent._bkg_color
            Rectangle:
                pos: self.pos
                size: self.size
    
    #(r2, c4)
    CheckBox:
        id: _lock_size_checkbox
        color: 1, 1, 1, 1
        canvas.before:
            Color: 
                rgba: 0, 0, 0, 1
            Rectangle:
                pos: self.pos
                size: self.size

    #(r2, c5)
    Label:
        id: _lock_position_label
        text: "Lock Pos"
        font_size: self.parent._label_font_size
        canvas.before:
            Color:
                rgba: self.parent._bkg_color
            Rectangle:
                pos: self.pos
                size: self.size

    #(r2, c6)
    CheckBox:
        id: _lock_position_checkbox
        color: 1, 1, 1, 1
        canvas.before:
            Color:
                rgba: 0, 0, 0, 1
            Rectangle:
                pos: self.pos
                size: self.size
    #(r3, c1)
    Button:
        id: _place_button
        text: "Place"
        pos: self.pos
        size: self.size
    
    #(r3, c2)
    Button:
        id: _new_button
        text: "New"
        canvas.before:
            Color:
                rgba: self.parent._bkg_color
            Rectangle:
                pos: self.pos
                size: self.size

    #(r3, c3)
    Button:
        id: _remove_button
        text: "Remove"
        pos: self.pos
        size: self.size

    
      


            





