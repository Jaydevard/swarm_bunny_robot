#:kivy 2.0

BoxLayout:
    orientation: 'vertical'
    # Top toolbar main boxlayout
    BoxLayout:
        orientation: 'horizontal'
        size_hint: 1, 0.05
        padding: 2
        spacing: 5
        # Fit toolbar to this main boxlayout
        Toolbar:
            id: toolbar
            size_hint: 0.5, 1
            _root : root  # get a reference to root
            Button:
                id: file_button
                text: "[b]F[/b]ile"
                color: 1, 1, 1, 1
                markup: True
                size_hint: 1, 1
                background_color: 0, 0, 1, 1
                on_release: self.parent.show_file_menu(self)
                canvas.before:
                    Color:
                        rgba: self.background_color
                    Rectangle:
                        pos: self.pos
                        size: self.size
            Button:
                id: view_button
                text: "[b]V[/b]iew"
                markup: True
                color: 1, 1, 1, 1
                size_hint: 1, 1
                background_color: 0, 0, 1, 1
                on_release: self.parent.show_view_menu(self)
                canvas.before:
                    Color:
                        rgba: self.background_color
                    Rectangle:
                        pos: self.pos
                        size: self.size
            Button:
                id: bunny_button
                text: "[b]B[/b]unny"
                markup: True
                size_hint: 1, 1
                background_color: 0, 0, 1, 1
                on_release: self.parent.show_bunny_menu(self)
                canvas.before:
                    Color:
                        rgba: self.background_color
                    Rectangle:
                        pos: self.pos
                        size: self.size
            Button:
                id: simulation_button
                text: "[b]S[/b]imulation"
                markup: True
                size_hint: 1, 1
                background_color: 0, 0, 1, 1
                on_release: self.parent.show_simulation_menu(self)
                canvas.before:
                    Color:
                        rgba: self.background_color
                    Rectangle:
                        pos: self.pos
                        size: self.size
        # Blank BoxLayout for Toolbar
        BoxLayout:
            size_hint: 1, 1
            Label:
                disabled: True
                background_color: 0, 0, 0, 1
                canvas.before:
                    Color:
                        rgba: self.background_color
                    Rectangle:
                        size: self.size
                        pos: self.pos
    GridLayout:
        id: main_grid_layout
        cols:2
        rows:1
        size_hint: 1, 1
        size: root.size
        pos: root.pos
        Splitter:
            sizable_from: 'right'
            strip_size: 5
            min_size: 375
            canvas:
                Color:
                    rgba: 0, 0, 1, 0.2
                Rectangle:
                    size: self.size
                    pos: self.pos
        # Left Column
            BoxLayout:
                orientation: 'vertical'
                size_hint: 0.6, 1
                pos_hint: {"left": 1}
                padding: 5
                spacing: 5
                # Create the Tabs
                TabbedPanel:
                    do_default_tab: False
                    tab_width: self.width/3
                    pos_hint:{"left": 1}
                    background_color: (255, 255, 255, 1.0)
                    TabbedPanelItem:
                        text: "Environment"
                        background_color: 0, 1, 0.4, 1
                        BoxLayout:
                            size_hint: 1, 1
                            Button:
                                text: "Hello"
                    TabbedPanelItem:
                        text: "Connections"
                        # Main Connections Layout
                        Connections:
                            id: connections
                            size_hint: 1, 1
                            orientation: "vertical"
                            # Top Layout for radio dongle
                            RadioDongleWidget:
                                size_hint: 1, 0.1
                                pos_hint: {"top": 1}

                            # Bottom Layout for Radio Channels
                            BoxLayout:
                                orientation: "horizontal"
                                size_hint: 1, 1
                                pos_hint: {"top": 1}
                                Image:
                                    source: "under_construction.png"
                                    size: self.texture_size

                            # StatusBar
                            BoxLayout:
                                size_hint: 1, 0.1
                                orientation: "vertical"
                                pos_hint: {"center_x":0.5, "center_y": 0.5}
                                StatusBarWidget:
                                    size_hint: 1, 1
                                    pos_hint: {"right": 1}


                    TabbedPanelItem:
                        text: "Choreography"
                        Choreography:
                            id: choreography
                            orientation: 'vertical'
                            Button:
                                text: "Custom"
                                id: custom
                                size_hint: 1, 0.2
                                on_press: root.ids.robot_canvas.custom_mode(root)
                                pos_hint: {"top":1}
                            Button:
                                text: "Custom Triangle"
                                id: custom_triangle
                                size_hint: 1, 0.2
                                on_press: root.ids.robot_canvas.triangle_custom_mode(root)
                                pos_hint: {"top":1}
                            Button:
                                text: "Triangle"
                                id: triangle
                                size_hint: 1, 0.2
                                on_press: root.ids.robot_canvas.draw_premade_shape("triangle", root)
                                pos_hint: {"top":1}
                            Button:
                                text: "Square"
                                id: square
                                on_press: root.ids.robot_canvas.draw_premade_shape("square", root)
                                size_hint: 1, 0.2
                                pos_hint: {"top":1}
                            Button:
                                text: "Clear"
                                id: clear
                                disabled: True
                                on_press: root.ids.robot_canvas.clear_canvas(root)
                                size_hint: 1, 0.2
                                pos_hint: {"top":1}

        # Right Column
        BoxLayout:
            size_hint: 1, 1
            orientation: 'vertical'
            spacing: 10
            padding: 10
            canvas.before:
                Color
                    #rgb: utils.get_color_from_hex('#D3D3D3')
                    rgb: 0, 0, 1, 1
                Rectangle:
                    size: self.size
                    pos: self.pos
            RobotCanvas:
                id: robot_canvas